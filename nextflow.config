process {
  withLabel: 'gpu' {
      executor = 'slurm'
      queue = 'gpu2'
      clusterOptions = '--gres=gpu:1 --partition=gpu2 --account=gpu2 --qos=gpu'
  }
}

process{
  withLabel: 'standard' {
    executor = 'slurm'
    queue = 'batch'
    cpus = 20
    memory = '80 GB'
    clusterOptions = '--partition=batch'
    time = '7d'
  }
}

params {
  // For 1st pipeline run:
  datasets = [
    BATS: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/BATS_pfam_validated_full_protein_400min.fa",
    ENA: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/ENA_pfam_validated_full_protein_400min.fa",
    GOV: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/GOV_pfam_validated_full_protein_400min.fa",
    HOTS: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/HOTS_pfam_validated_full_protein_400min.fa"
  ]
  
  phidra_dir = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/phidra"

  pfamDB = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/phidra/pfam_database"
  proteins = [
    [ protein: "RNR", 
      pfamDomain: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/rnr_classIalpha_classII_PF00317_PF02867_PF08343_PF21995_ida_file.tsv", 
      subjectDB: "/mnt/VEIL/references/pasv/mmseqs_search/NrdAEJ_alldb_08_27_2018.clean_headers.faa",
      pasv_align_refs: "/mnt/VEIL/references/pasv/pasv_profile/rnr__classIa_classII__best_practices.fa"
      ], 
      
    [ protein: "PolA", 
      pfamDomain: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/pola_PF00476_ida_file.tsv", 
      subjectDB: "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/uniprotkb_DNA_polymerase_A_plus_BATS_his.fasta",
      pasv_align_refs: "/mnt/VEIL/references/pasv/pasv_profile/pola_16_k12_ref.fa"
      ],

    // [ protein: "Helicase",
    //   pfamDomain: "/mnt/VEIL/tools/phidra_resources/ida_files/helicase_ida_file.tsv", 
    //   subjectDB: "/mnt/VEIL/references/helicase/HeliBase_v3_github.fasta",
    //   ],
    
    // [ protein: "PolB",
    //   pfamDomain: "/mnt/VEIL/tools/phidra_resources/ida_files/polb_PF08490_PR00136_PF03175_ida_file.tsv", 
    //   subjectDB: "/mnt/VEIL/tools/phidra_resources/subject_db/polb_refs_pPolB_rPolB_piPolB.fasta"
    //   ]
  ] 
  outdir = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/fifth_test"
  // After running the 1st pipeline run, do not change above fields.

  // For 2nd pipeline run:
  md = [0.3, 0.5]
  nn = [75, 100]
  mc = [20, 30]
  second_run = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/output_test/combined_results.tsv"
  selected_genofeatures = ['RDKY','RDKF','RDKL','pPolB','rPolB', 'Dda', 'DnaB', 'Gp4', 'Gp41', 'RecA', 'RecB', 'SNF2', 'Twinkle', 'UvsW', 'UvsX', 'NCECA', 'NCEAL', 'NCECP', 'NCECL']
  // selected_genofeatures = ['rPolB', 'piPolB', 'pPolB'] 
  genofeature_metadata = "/mnt/VEIL/users/nolanv/embedding_test/protein_metadata_all.txt"
  // below list what datasets you want to use for embeddings
  embedding_datasets = ["ENA"]

  // For 3rd pipeline run:
  embeddings = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/output_test/embeddings"
  final_md = 0.5
  final_nn = 100
  // regenerate corodinates
  selected_genofeatures_2 = ['RDKY','RDKF','RDKL','pPolB','rPolB', 'Dda', 'DnaB']
  clusters_dir = "/mnt/VEIL/users/nolanv/pipeline_project/VasilVEILPipeline/third_test/hdbscan/clusters_csv/plots"
  // add selected_genofeatures and datasets for final analysis like others.
}